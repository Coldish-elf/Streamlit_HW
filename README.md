# Анализ температурных данных и мониторинг
## Функционал

- **Анализ временного ряда температур**  
  Отображение графика с исходными значениями, скользящим средним, границами норм (среднее ±2σ) и долгосрочным трендом.

- **Обнаружение аномалий**  
  Автоматическое выявление температурных аномалий и их визуальное выделение.

- **Мониторинг текущей температуры**  
  Получение текущей температуры через OpenWeatherMap API с возможностью использования синхронных и асинхронных методов, а также сравнение их производительности.

- **Тепловая карта**  
  Построение интерактивной тепловой карты температур по всем городам и для выбранного города в заданном периоде.

## Структура проекта

```
Streamlit_hw\
│
├── old_app.py               # Первоначальная версия(все в одном файле с описаниями)
├── main.py                  # Запуск приложения
├── README.md                # Информация о проекте, инструкциях по запуску и описании функционала
├── requirements.txt         # Зависимости проекта
├── .gitignore               # Файлы, исключенные из контроля версий
├── .streamlit\              
   ├── config.toml           # Конфигурационный файл для настройки Streamlit
├── .devcontainer\     
   ├──devcontainer.json      # Конфигурационный файл для настройки контейнера разработки
└── app\
   ├── app.py               # Основной модуль приложения, объединяющий вкладки
   ├── anomalies_tab.py     # Отображение таблицы и графика обнаруженных аномалий
   ├── heatmap_tab.py       # Построение тепловых карт температур
   ├── helper_functions.py  # Утилиты для предобработки данных и работы с API
   ├── monitoring_tab.py    # Получение и отображение текущей температуры
   ├── sidebar.py           # Боковая панель с настройками, выбором города, периода и API ключа
   ├── time_series_tab.py   # Визуализация временного ряда температур с трендом и скользящим средним
   └── __init__.py      
```

## Логика работы приложения

1. **Запуск:**  
   Приложение запускается через `main.py`, который импортирует и вызывает функцию `run_app()` из модуля `app/app.py`.

2. **Панель управления:**  
   В боковой панели пользователь может:
   - Загрузить собственный CSV-файл или использовать стандартные данные (`temperature_data.csv`).
   - Выбрать город и период для анализа.
   - Ввести API ключ для получения текущей температуры. 

3. **Анализ исторических данных:**  
   Функции в `helper_functions.py` выполняют предобработку данных, вычисляют скользящее среднее, стандартное отклонение и устанавливают границы норм. Для повышения производительности предусмотрено использование распараллеливания (через ThreadPoolExecutor или multiprocessing).

4. **Мониторинг текущей температуры:**  
   Вкладка мониторинга использует OpenWeatherMap API для получения актуальной температуры. Если ключ некорректный, выводится сообщение об ошибке с ссылкой для подробностей.

5. **Визуализация:**  
   Результаты анализа отображаются с помощью интерактивных графиков Plotly и DataFrame Streamlit. Пользователь также может переключаться между разными вкладками:
   - Временной ряд температур
   - Аномалии
   - Текущий мониторинг температуры
   - Тепловая карта

## Установка и запуск

1. Установить зависимости:
   ```bash
   pip install -r requirements.txt
   ```

2. Запустить приложение:
   ```bash
   streamlit run main.py
   ```

## Дополнительная информация
  **Анализ производительности:**
  - Параллельная обработка эффективна при большом количестве городов
  - Если объём данных небольшой, запуск параллельных процессов могут оказаться требовательнее. При маленьких объёмах данные обрабатываются быстрее обычным способом.

        