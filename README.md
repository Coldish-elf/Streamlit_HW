# Анализ температурных данных и мониторинг

## Функционал проекта

- **Временной ряд температур**  
  Отображение графика температуры по выбранному городу, включая скользящее среднее, границы норм и долгосрочный тренд.

- **Обнаружение аномалий**  
  Автоматическое выделение и визуализация аномальных измерений температуры.

- **Мониторинг текущей температуры**  
  Получение данных текущей температуры через OpenWeatherMap API с помощью синхронных и асинхронных запросов, а также сравнение их производительности.

- **Тепловая карта**  
  Интерактивная визуализация температур по городам и для выбранного города за определенный период.

- **Экспорт данных**  
  Выгрузка данных по выбранному городу и сезонных статистик в формате CSV.

## Логика работы

1. Приложение запускается через файл `main.py`, который вызывает функцию `run_app` из модуля `app`.
2. Пользователь настраивает параметры анализа в боковой панели (файл `sidebar.py`), где можно загрузить датасет, выбрать город и период, а также ввести API ключ.
3. Данные обрабатываются и дополняются статистиками с использованием функций из файла `helper_functions.py`.
4. Для визуализации и анализа используются различные вкладки:
   - **Временной ряд** (файл `time_series_tab.py`)
   - **Аномалии** (файл `anomalies_tab.py`)
   - **Мониторинг** (файл `monitoring_tab.py`)
   - **Тепловая карта** (файл `heatmap_tab.py`)

## Структура проекта

```
c:\!КНАД\code\streamlit_hw\
│
├── main.py              
├── README.md             
└── app\
    ├── app.py            
    ├── heatmap_tab.py   
    ├── helper_functions.py
    ├── monitoring_tab.py 
    ├── sidebar.py       
    ├── time_series_tab.py
    └── __init__.py       
```

## Описание файлов

- **main.py**  
  Точка входа в приложение. Импортирует функцию `run_app` из модуля `app` и запускает приложение.

- **README.md**  
  Файл с описанием функционала проекта, логикой работы, структурой проекта и инструкциями по запуску.

- **app/app.py**  
  Главный модуль, объединяющий все вкладки и настраивающий основное оформление страницы.

- **app/anomalies_tab.py**  
  Отвечает за отображение обнаруженных аномальных значений температуры. Форматирует и выводит данные с отметкой времени.

- **app/heatmap_tab.py**  
  Создает интерактивные тепловые карты для визуализации распределения температур по городам и по датам.

- **app/helper_functions.py**  
  Содержит утилиты: загрузку и предобработку данных, вычисление скользящих статистик, а также функции для работы с OpenWeatherMap API.

- **app/monitoring_tab.py**  
  Модуль для мониторинга текущей температуры. Выполняет запросы к OpenWeatherMap API и сравнивает текущие значения с обычными сезонными нормами.

- **app/sidebar.py**  
  Отвечает за боковую панель настроек: загрузку данных, выбор города, периода анализа и тестирование API ключа.

- **app/time_series_tab.py**  
  Отображает временной ряд температур с наложением скользящего среднего, а также дополнительной информации (тренд, аномалии, сезонная статистика).

- **app/__init__.py**  
  Файл для инициализации пакета приложения.
  
## Запуск приложения

1. Установите необходимые зависимости:
   ```
   pip install streamlit pandas plotly httpx requests numpy
   ```
2. Запустите приложение:
   ```
   streamlit run main.py
   ```
